// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider        = "prisma-client-js"
    previewFeatures = []
}

generator typegraphql {
    provider = "typegraphql-prisma"
    output   = "../prisma/generated/type-graphql"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model FavoriteColor {
    id    Int    @id @default(autoincrement())
    color String
}

model Page {
    id        Int        @id @default(autoincrement())
    title     String     @unique
    createdAt DateTime   @default(now())
    updatedAt DateTime   @updatedAt
    revisions Revision[]
}

model Revision {
    id          Int      @id @default(autoincrement())
    Page        Page     @relation(fields: [pageId], references: [id], onDelete: Cascade)
    pageId      Int
    rawContent  String // forgeText, used for editors
    htmlContent String? // prerendered, used for viewers (may be cached elsewhere in the future)
    timestamp   DateTime @default(now())
}
